<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • haven</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://haven.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="haven.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">haven</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.5.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/datetimes.html">Dates and times</a></li>
    <li><a class="dropdown-item" href="../articles/semantics.html">Conversion semantics</a></li>
  </ul></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/04/haven-2-5-0/">Version 2.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/04/haven-2-4-0/">Version 2.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/06/haven-2-3-0/">Version 2.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/11/haven-2-2-0/">Version 2.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/02/haven-2-1-0/">Version 2.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/01/haven-2-0-0/">Version 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/06/haven-1-1-2/">Version 1.1.2</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2016/10/04/haven-1-0-0/">Version 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.org/2015/03/04/haven-0-1-0/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/haven/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/tidyverse/haven/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="haven-development-version">haven (development version)<a class="anchor" aria-label="anchor" href="#haven-development-version"></a></h2>
<ul><li><p>When a string variable has a date and/or time format <code>read_*()</code> functions now warn and treat the variable as a plain string instead of throwing an error (<a href="https://github.com/tidyverse/haven/issues/747" class="external-link">#747</a>). This should not normally occur, but has been observed in files produced by 3rd party software.</p></li>
<li><p><code>write_*()</code> functions now take into account the width of value labels when calculating string variable widths. Previously it was possible to create value label sets with values that were wider than the string variable, causing issues when reading files (<a href="https://github.com/tidyverse/haven/issues/537" class="external-link">#537</a>).</p></li>
<li><p><code><a href="../reference/read_xpt.html">write_xpt()</a></code> now errors if variable names are too long for the XPT version: 8 bytes for version 5, 32 bytes for version 8. Previously, long names were silently truncated for version 5 and error messaging was inconsistent (<a href="https://github.com/tidyverse/haven/issues/771" class="external-link">#771</a>).</p></li>
<li><p><code><a href="../reference/read_sas.html">read_sas()</a></code> and <code><a href="../reference/read_xpt.html">read_xpt()</a></code> now supports all datetime, date and time formats (<a href="https://github.com/tidyverse/haven/issues/780" class="external-link">#780</a>) and correctly recognises DATEAMPM as datetime (<a href="https://github.com/tidyverse/haven/issues/789" class="external-link">#789</a>).</p></li>
<li><p>Fix bug that caused <code><a href="../reference/read_xpt.html">write_xpt()</a></code> to fail when writing tagged <code>NA</code> values (<a href="https://github.com/tidyverse/haven/issues/755" class="external-link">#755</a>).</p></li>
<li><p>Tagged <code>NA</code> values are now silently converted to lower case when they are created in R with <code><a href="../reference/tagged_na.html">tagged_na()</a></code> or checked with <code><a href="../reference/tagged_na.html">is_tagged_na()</a></code>. These are case insensitive when reading and writing, so forcing lower case removes any potential ambiguity.</p></li>
<li><p>Character limit checks in <code><a href="../reference/read_xpt.html">write_xpt()</a></code> now check for the number of bytes instead of the number of characters (<a href="https://github.com/tidyverse/haven/issues/746" class="external-link">#746</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.5" id="haven-255">haven 2.5.5<a class="anchor" aria-label="anchor" href="#haven-255"></a></h2><p class="text-muted">CRAN release: 2025-05-30</p>
<ul><li>Updated ReadStat to fix stricter gcc diagnostics.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.4" id="haven-254">haven 2.5.4<a class="anchor" aria-label="anchor" href="#haven-254"></a></h2><p class="text-muted">CRAN release: 2023-11-30</p>
<ul><li>Fix for upcoming R-devel change.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.3" id="haven-253">haven 2.5.3<a class="anchor" aria-label="anchor" href="#haven-253"></a></h2><p class="text-muted">CRAN release: 2023-06-30</p>
<ul><li>Fix for upcoming R-devel change.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.2" id="haven-252">haven 2.5.2<a class="anchor" aria-label="anchor" href="#haven-252"></a></h2><p class="text-muted">CRAN release: 2023-02-28</p>
<ul><li>
<p>Updated to ReadStat 1.1.9.</p>
<ul><li>Fix various SAS catalog file reading bugs (<a href="https://github.com/tidyverse/haven/issues/529" class="external-link">#529</a>, <a href="https://github.com/tidyverse/haven/issues/653" class="external-link">#653</a>, <a href="https://github.com/tidyverse/haven/issues/680" class="external-link">#680</a>, <a href="https://github.com/tidyverse/haven/issues/696" class="external-link">#696</a>, <a href="https://github.com/tidyverse/haven/issues/705" class="external-link">#705</a>).</li>
<li>Increase maximum SAS page file size to 16MiB (<a href="https://github.com/tidyverse/haven/issues/697" class="external-link">#697</a>).</li>
<li>Ignore invalid SAV timestamp strings (<a href="https://github.com/tidyverse/haven/issues/683" class="external-link">#683</a>).</li>
<li>Fix compiler warnings (<a href="https://github.com/tidyverse/haven/issues/707" class="external-link">#707</a>).</li>
</ul></li>
<li><p>The experimental <code><a href="../reference/write_sas.html">write_sas()</a></code> function has been deprecated (<a href="https://github.com/tidyverse/haven/issues/224" class="external-link">#224</a>). The sas7bdat file format is complex and undocumented, and as such writing SAS files is not officially supported by ReadStat. <code><a href="../reference/read_xpt.html">write_xpt()</a></code> should be used instead - it produces files in the SAS transport format, which has limitations but will be reliably read by SAS.</p></li>
<li>
<p><code>write_*()</code> functions gain a new <code>adjust_tz</code> argument to allow more control over time zone conversion for date-time variables (<a href="https://github.com/tidyverse/haven/issues/702" class="external-link">#702</a>). Thanks to <a href="https://github.com/jmobrien" class="external-link">@jmobrien</a> for the detailed issue and feedback.</p>
<p>Stata, SPSS and SAS do not have a concept of time zone. Since haven 2.4.0 date-time values in non-UTC time zones are implicitly converted when writing to ensure the time displayed in Stata/SPSS/SAS will match the time displayed to the user in R (see <a href="https://github.com/tidyverse/haven/issues/555" class="external-link">#555</a>). This is the behaviour when <code>adjust_tz = TRUE</code> (the default). Although this is in line with general user expectations it can cause issues when the time zone is important, for e.g. when looking at differences between time points, since the underlying numeric data is changed to preserve the displayed time. Use <code>adjust_tz = FALSE</code> to write the time as the corresponding UTC value, which will appear different to the user but preserves the underlying numeric data.</p>
</li>
<li><p><code>write_*()</code> functions previously returned the data frame with minor alterations made to date-time variables. These functions now invisibly return the original input data frame unchanged (<a href="https://github.com/jmobrien" class="external-link">@jmobrien</a>, <a href="https://github.com/tidyverse/haven/issues/702" class="external-link">#702</a>).</p></li>
<li>
<p>Fix bug in string variable width calculation that treated <code>NA</code> values as width</p>
<ol start="2" style="list-style-type: decimal"><li>
<code>NA</code> values are now treated as blanks for width calculations (<a href="https://github.com/tidyverse/haven/issues/699" class="external-link">#699</a>).</li>
</ol></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.1" id="haven-251">haven 2.5.1<a class="anchor" aria-label="anchor" href="#haven-251"></a></h2><p class="text-muted">CRAN release: 2022-08-22</p>
<ul><li><p>All <code><a href="../reference/labelled.html">labelled()</a></code> vectors now have left-aligned column headers when printing in tibbles for better alignment with labels (<a href="https://github.com/tidyverse/haven/issues/676" class="external-link">#676</a>).</p></li>
<li><p><code>write_*()</code> now accept functions as well as strings in the <code>.name_repair</code> argument in line with the documentation. Previously they only supported string values (<a href="https://github.com/tidyverse/haven/issues/684" class="external-link">#684</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> variable name validation no longer treats all non-ASCII characters as invalid (<a href="https://github.com/tidyverse/haven/issues/689" class="external-link">#689</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.0" id="haven-250">haven 2.5.0<a class="anchor" aria-label="anchor" href="#haven-250"></a></h2><p class="text-muted">CRAN release: 2022-04-15</p>
<div class="section level3">
<h3 id="new-author-2-5-0">New author<a class="anchor" aria-label="anchor" href="#new-author-2-5-0"></a></h3>
<ul><li>@gorcha is now a haven author in recognition of his significant and sustained contributions.</li>
</ul></div>
<div class="section level3">
<h3 id="file-writing-improvements-2-5-0">File writing improvements<a class="anchor" aria-label="anchor" href="#file-writing-improvements-2-5-0"></a></h3>
<ul><li><p>All <code>write_</code> functions can now write custom variable widths by setting the <code>width</code> attribute (<a href="https://github.com/tidyverse/haven/issues/650" class="external-link">#650</a>).</p></li>
<li><p>When writing files, the minimum width for character variables is now 1. This fixes issues with statistical software reading blank character variables with width 0 (<a href="https://github.com/tidyverse/haven/issues/650" class="external-link">#650</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> now uses strL when strings are too long to be stored in an str# variable (<a href="https://github.com/tidyverse/haven/issues/437" class="external-link">#437</a>). strL is used when strings are longer than 2045 characters by default, which matches Stata’s behaviour, but this can be reduced with the <code>strl_threshold</code> argument.</p></li>
<li><p><code><a href="../reference/read_xpt.html">write_xpt()</a></code> can now write dataset labels with the <code>label</code> argument, which defaults to the <code>label</code> attribute of the input data frame, if present (<a href="https://github.com/tidyverse/haven/issues/562" class="external-link">#562</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> now checks for case-insensitive duplicate variable names (<a href="https://github.com/juansebastianl" class="external-link">@juansebastianl</a>, <a href="https://github.com/tidyverse/haven/issues/641" class="external-link">#641</a>) and verifies that variable names are valid SPSS variables.</p></li>
<li><p>The <code>compress</code> argument for <code><a href="../reference/read_spss.html">write_sav()</a></code> now supports all 3 SPSS compression modes specified as a character string - “byte”, “none” and “zsav” (<a href="https://github.com/tidyverse/haven/issues/614" class="external-link">#614</a>). <code>TRUE</code> and <code>FALSE</code> can be used for backwards compatibility, and correspond to the “zsav” and “none” options respectively.</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> successfully writes user missing values and ranges for <code><a href="../reference/labelled.html">labelled()</a></code> integer vectors (<a href="https://github.com/tidyverse/haven/issues/596" class="external-link">#596</a>).</p></li>
<li><p>POSIXct and POSIXlt values with no time component (e.g. “2010-01-01”) were being converted to <code>NA</code> when attempting to convert the output timezone to UTC. These now output successfully (<a href="https://github.com/tidyverse/haven/issues/634" class="external-link">#634</a>).</p></li>
<li><p>Fix bug in output timezone conversion that was causing variable labels and other variable attributes to disappear (<a href="https://github.com/tidyverse/haven/issues/624" class="external-link">#624</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-improvements-and-fixes-2-5-0">Other improvements and fixes<a class="anchor" aria-label="anchor" href="#other-improvements-and-fixes-2-5-0"></a></h3>
<ul><li>
<p>Updated to ReadStat 1.1.8 RC.</p>
<ul><li>Fix bug when writing formats to XPT files (<a href="https://github.com/tidyverse/haven/issues/650" class="external-link">#650</a>).</li>
<li>Fix off by one error in indexing for strL variables (<a href="https://github.com/tidyverse/haven/issues/437" class="external-link">#437</a>).</li>
</ul></li>
<li><p><code><a href="../reference/labelled.html">labelled()</a></code> vectors now throw a warning when combining two vectors with conflicting labels (<a href="https://github.com/tidyverse/haven/issues/667" class="external-link">#667</a>).</p></li>
<li><p><code><a href="../reference/zap_labels.html">zap_labels()</a></code> gains a <code>user_na</code> argument to control whether user-defined missing values are converted to <code>NA</code> or left as is (<a href="https://github.com/tidyverse/haven/issues/638" class="external-link">#638</a>).</p></li>
<li><p>vctrs casting and coercion generics now do less work when working with two identical <code><a href="../reference/labelled.html">labelled()</a></code> vectors. This significantly improves performance when working with <code><a href="../reference/labelled.html">labelled()</a></code> vectors in grouped data frames (<a href="https://github.com/tidyverse/haven/issues/658" class="external-link">#658</a>).</p></li>
<li><p>Errors and warnings now use <code>cli_abort()</code> and <code>cli_warning()</code> (<a href="https://github.com/tidyverse/haven/issues/661" class="external-link">#661</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="dependency-changes-2-5-0">Dependency changes<a class="anchor" aria-label="anchor" href="#dependency-changes-2-5-0"></a></h3>
<ul><li><p>R 3.4 is now the minimum supported version, in line with <a href="https://www.tidyverse.org/blog/2019/04/r-version-support/" class="external-link">tidyverse policy</a>.</p></li>
<li><p>cli &gt;= 3.0.0 has been added to Imports to support new error messaging.</p></li>
<li><p>lifecycle has been added to Imports, and is now used to manage deprecations.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.4.3" id="haven-243">haven 2.4.3<a class="anchor" aria-label="anchor" href="#haven-243"></a></h2><p class="text-muted">CRAN release: 2021-08-04</p>
<ul><li>Fix build failure on Solaris.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.4.2" id="haven-242">haven 2.4.2<a class="anchor" aria-label="anchor" href="#haven-242"></a></h2><p class="text-muted">CRAN release: 2021-08-02</p>
<ul><li><p>Updated to ReadStat 1.1.7 RC (<a href="https://github.com/tidyverse/haven/issues/620" class="external-link">#620</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">read_dta()</a></code> no longer crashes if it sees StrL variables with missing values (<a href="https://github.com/gorcha" class="external-link">@gorcha</a>, <a href="https://github.com/tidyverse/haven/issues/594" class="external-link">#594</a>, <a href="https://github.com/tidyverse/haven/issues/600" class="external-link">#600</a>, <a href="https://github.com/tidyverse/haven/issues/608" class="external-link">#608</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> now correctly handles “labelled”-class numeric (double) variables that don’t have value labels (<a href="https://github.com/jmobrien" class="external-link">@jmobrien</a>, <a href="https://github.com/tidyverse/haven/issues/606" class="external-link">#606</a>, <a href="https://github.com/tidyverse/haven/issues/609" class="external-link">#609</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> now allows variable names up to 32 characters (<a href="https://github.com/sbae" class="external-link">@sbae</a>, <a href="https://github.com/tidyverse/haven/issues/605" class="external-link">#605</a>).</p></li>
<li><p>Can now correctly combine <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> with identical labels (<a href="https://github.com/gorcha" class="external-link">@gorcha</a>, <a href="https://github.com/tidyverse/haven/issues/599" class="external-link">#599</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.4.1" id="haven-241">haven 2.4.1<a class="anchor" aria-label="anchor" href="#haven-241"></a></h2><p class="text-muted">CRAN release: 2021-04-23</p>
<ul><li>Fix buglet when combining <code><a href="../reference/labelled.html">labelled()</a></code> with identical labels.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.4.0" id="haven-240">haven 2.4.0<a class="anchor" aria-label="anchor" href="#haven-240"></a></h2><p class="text-muted">CRAN release: 2021-04-14</p>
<div class="section level3">
<h3 id="new-features-2-4-0">New features<a class="anchor" aria-label="anchor" href="#new-features-2-4-0"></a></h3>
<ul><li><p><code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> gains full vctrs support thanks to the hard work of <a href="https://github.com/gorcha" class="external-link">@gorcha</a> (<a href="https://github.com/tidyverse/haven/issues/527" class="external-link">#527</a>, <a href="https://github.com/tidyverse/haven/issues/534" class="external-link">#534</a>, <a href="https://github.com/tidyverse/haven/issues/538" class="external-link">#538</a>, <a href="https://github.com/tidyverse/haven/issues/557" class="external-link">#557</a>). This means that they should now work seamlessly in dplyr 1.0.0, tidyr 1.0.0 and other packages that use vctrs.</p></li>
<li><p><code><a href="../reference/labelled.html">labelled()</a></code> vectors are more permissive when concatenating; output labels will be a combination of the left-hand and the right-hand side, preferring values assigned to the left-hand side (<a href="https://github.com/tidyverse/haven/issues/543" class="external-link">#543</a>).</p></li>
<li><p>Date-times are no longer forced to UTC, but instead converted to the equivalent UTC (<a href="https://github.com/tidyverse/haven/issues/555" class="external-link">#555</a>). This should ensure that you see the same date-time in R and in Stata/SPSS/SAS.</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-4-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-4-0"></a></h3>
<ul><li><p>Updated to ReadStat 1.1.5. Most importantly this includes support for SAS binary compression.</p></li>
<li><p><code>as_factor(levels = "values")</code> preserves values of unlabelled elements (<a href="https://github.com/tidyverse/haven/issues/570" class="external-link">#570</a>).</p></li>
<li><p><code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> is a little stricter: it prevents <code>na_range</code> and <code>na_value</code> from containing missing values, and ensures that <code>na_range</code> is in the correct order (<a href="https://github.com/tidyverse/haven/issues/574" class="external-link">#574</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">read_spss()</a></code> now reads NA values and ranges of character variables (<a href="https://github.com/tidyverse/haven/issues/409" class="external-link">#409</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> now correctly writes tagged NAs (including tagged NAs in labels) (<a href="https://github.com/tidyverse/haven/issues/583" class="external-link">#583</a>) and once again validates length of variables names (<a href="https://github.com/tidyverse/haven/issues/485" class="external-link">#485</a>).</p></li>
<li><p><code>write_*()</code> now validate file and variable metadata with ReadStat. This should prevent many invalid files from being written (<a href="https://github.com/tidyverse/haven/issues/408" class="external-link">#408</a>). Additionally, validation failures now provide more details about the source of the problem (e.g. the column name of the problem) (<a href="https://github.com/tidyverse/haven/issues/463" class="external-link">#463</a>).</p></li>
<li><p><code>write_sav(compress = FALSE)</code> now uses SPSS bytecode compression instead of the rarely-used uncompressed mode. <code>compress = TRUE</code> continues to use the newer (and not universally supported, but more compact) zlib format (<a href="https://github.com/oliverbock" class="external-link">@oliverbock</a>, <a href="https://github.com/tidyverse/haven/issues/544" class="external-link">#544</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.1" id="haven-231">haven 2.3.1<a class="anchor" aria-label="anchor" href="#haven-231"></a></h2><p class="text-muted">CRAN release: 2020-06-01</p>
<ul><li><p>Add missing methods so <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code>, <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code> and <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> work once more (<a href="https://github.com/tidyverse/haven/issues/520" class="external-link">#520</a>).</p></li>
<li><p>Add missing cast methods (<a href="https://github.com/tidyverse/haven/issues/522" class="external-link">#522</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.0" id="haven-230">haven 2.3.0<a class="anchor" aria-label="anchor" href="#haven-230"></a></h2><p class="text-muted">CRAN release: 2020-05-24</p>
<ul><li><p><code><a href="../reference/labelled.html">labelled()</a></code> gains the necessary support to work seemlessly in dplyr 1.0.0, tidyr 1.0.0, and other packages that use vctrs (<a href="https://github.com/mikmart" class="external-link">@mikmart</a>, <a href="https://github.com/tidyverse/haven/issues/496" class="external-link">#496</a>).</p></li>
<li><p><code><a href="../reference/labelled.html">labelled()</a></code> vectors now explicitly inherit from the corresponding base types (e.g. integer, double, or character) (<a href="https://github.com/tidyverse/haven/issues/509" class="external-link">#509</a>).</p></li>
<li><p>ReadStat update, including <code><a href="../reference/read_sas.html">read_sas()</a></code> supports for “any” encoding (<a href="https://github.com/tidyverse/haven/issues/482" class="external-link">#482</a>), and fixes for compiler warnings.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.0" id="haven-220">haven 2.2.0<a class="anchor" aria-label="anchor" href="#haven-220"></a></h2><p class="text-muted">CRAN release: 2019-11-08</p>
<div class="section level3">
<h3 id="partial-reading-2-2-0">Partial reading<a class="anchor" aria-label="anchor" href="#partial-reading-2-2-0"></a></h3>
<p>Thanks to the hard work of <a href="https://github.com/mikmart" class="external-link">@mikmart</a>, all <code>read_*()</code> functions gain three new arguments that allow you to read in only part of a large file:</p>
<ul><li>
<code>col_select</code>: selects columns to read with a tidyselect interface (<a href="https://github.com/tidyverse/haven/issues/248" class="external-link">#248</a>).</li>
<li>
<code>skip</code>: skips rows before reading data (<a href="https://github.com/tidyverse/haven/issues/370" class="external-link">#370</a>).</li>
<li>
<code>n_max</code>: limits the number of rows to read.</li>
</ul><p>This also brings with it a deprecation: <code>cols_only</code> in <code><a href="../reference/read_sas.html">read_sas()</a></code> has been deprecated in favour of the new <code>col_select</code> argument.</p>
</div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-2-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-2-0"></a></h3>
<ul><li><p><code><a href="../reference/as_factor.html">as_factor()</a></code> allows non-unique labels when <code>levels = "label"</code>. This fixes a particularly annoying printing bug (<a href="https://github.com/tidyverse/haven/issues/424" class="external-link">#424</a>, <a href="https://github.com/gergness" class="external-link">@gergness</a>)</p></li>
<li><p><code><a href="../reference/read_sas.html">read_sas()</a></code> now supports (IS|E|B)8601(DT|DA|TM) date/time formats (<a href="https://github.com/mikmart" class="external-link">@mikmart</a>).</p></li>
<li><p>All <code>write_</code> functions gain a <code>.name_repair</code> argument that controls what happens when the input dataset has repeated column names (<a href="https://github.com/tidyverse/haven/issues/436" class="external-link">#436</a>).</p></li>
<li><p>All <code>write_</code> functions can now write labelled vectors with <code>NULL</code> labels (<a href="https://github.com/tidyverse/haven/issues/442" class="external-link">#442</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> can now write dataset labels with the <code>label</code> argument, which defaults to the <code>label</code> attribute of the input data frame, if present (<a href="https://github.com/gorcha" class="external-link">@gorcha</a>, <a href="https://github.com/tidyverse/haven/issues/449" class="external-link">#449</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> works better with Stata 15, thanks to updated ReadStat (<a href="https://github.com/tidyverse/haven/issues/461" class="external-link">#461</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.1" id="haven-211">haven 2.1.1<a class="anchor" aria-label="anchor" href="#haven-211"></a></h2><p class="text-muted">CRAN release: 2019-07-04</p>
<ul><li>Fixes for R CMD check</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.0" id="haven-210">haven 2.1.0<a class="anchor" aria-label="anchor" href="#haven-210"></a></h2><p class="text-muted">CRAN release: 2019-02-19</p>
<div class="section level3">
<h3 id="improved-labelling-2-1-0">Improved labelling<a class="anchor" aria-label="anchor" href="#improved-labelling-2-1-0"></a></h3>
<p><code>labelled</code> objects get pretty printing that shows the labels and NA values when inside of a <code>tbl_df</code>. Turn this behaviour off with behavior using <code>option(haven.show_pillar_labels = FALSE)</code> (<a href="https://github.com/tidyverse/haven/issues/340" class="external-link">#340</a>, <a href="https://github.com/gergness" class="external-link">@gergness</a>).</p>
<p><code><a href="../reference/labelled.html">labelled()</a></code> and <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> now allow <code>NULL</code> labels. This makes both classes more flexible, allowing you to use them for their other attributes (<a href="https://github.com/tidyverse/haven/issues/219" class="external-link">#219</a>).</p>
<p><code><a href="../reference/labelled.html">labelled()</a></code> tests that value labels are unique (<a href="https://github.com/larmarange" class="external-link">@larmarange</a>, <a href="https://github.com/tidyverse/haven/issues/364" class="external-link">#364</a>)</p>
</div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-1-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-1-0"></a></h3>
<ul><li>
<p><code><a href="../reference/as_factor.html">as_factor()</a></code>:</p>
<ul><li>Is faster when input doesn’t contain any missing values (<a href="https://github.com/hughparsonage" class="external-link">@hughparsonage</a>).</li>
<li>Added <code>labelled</code> method for backward compatbility (<a href="https://github.com/tidyverse/haven/issues/414" class="external-link">#414</a>).</li>
<li>
<code>data.frame</code> method now correctly passes <code>...</code> along (<a href="https://github.com/tidyverse/haven/issues/407" class="external-link">#407</a>, <a href="https://github.com/zkamvar" class="external-link">@zkamvar</a>).</li>
</ul></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> now checks that the labelled values are integers, not the values themselves (<a href="https://github.com/tidyverse/haven/issues/401" class="external-link">#401</a>).</p></li>
<li>
<p>Updated to latest ReadStat from <a href="https://github.com/evanmiller" class="external-link">@evanmiller</a>:</p>
<ul><li>
<code><a href="../reference/read_spss.html">read_por()</a></code> can now read files from SPSS 25 (<a href="https://github.com/tidyverse/haven/issues/412" class="external-link">#412</a>)</li>
<li>
<code><a href="../reference/read_spss.html">read_por()</a></code> now uses base-30 instead of base-10 for the exponent (<a href="https://github.com/tidyverse/haven/issues/413" class="external-link">#413</a>)</li>
<li>
<code><a href="../reference/read_sas.html">read_sas()</a></code> can read zero column file (<a href="https://github.com/tidyverse/haven/issues/420" class="external-link">#420</a>)</li>
<li>
<code><a href="../reference/read_spss.html">read_sav()</a></code> reads long strings (<a href="https://github.com/tidyverse/haven/issues/381" class="external-link">#381</a>)</li>
<li>
<code><a href="../reference/read_spss.html">read_sav()</a></code> has greater memory limit allowing it to read more labels (<a href="https://github.com/tidyverse/haven/issues/418" class="external-link">#418</a>)</li>
<li>
<code><a href="../reference/read_spss.html">read_spss()</a></code> reads long variable labels (<a href="https://github.com/tidyverse/haven/issues/422" class="external-link">#422</a>)</li>
<li>
<code><a href="../reference/read_spss.html">write_sav()</a></code> no longer creates incorrect column names when &gt;10k columns (<a href="https://github.com/tidyverse/haven/issues/410" class="external-link">#410</a>)</li>
<li>
<code><a href="../reference/read_spss.html">write_sav()</a></code> no longer crashes when writing long label names (<a href="https://github.com/tidyverse/haven/issues/395" class="external-link">#395</a>)</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.0" id="haven-200">haven 2.0.0<a class="anchor" aria-label="anchor" href="#haven-200"></a></h2><p class="text-muted">CRAN release: 2018-11-21</p>
<div class="section level3">
<h3 id="breaking-changes-2-0-0">BREAKING CHANGES<a class="anchor" aria-label="anchor" href="#breaking-changes-2-0-0"></a></h3>
<ul><li>
<p><code><a href="../reference/labelled.html">labelled()</a></code> and <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> now produce objects with class “haven_labelled” and “haven_labelled_spss”. Previously, the “labelled” class name clashed with the labelled class defined by Hmisc (<a href="https://github.com/tidyverse/haven/issues/329" class="external-link">#329</a>).</p>
<p>Unfortunately I couldn’t come up with a way to fix this problem except to change the class name; it seems reasonable that haven should be the one to change names given that Hmisc has been around much longer. This will require some changes to packages that use haven, but shouldn’t affect user code.</p>
</li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-2-0-0">Minor improvements<a class="anchor" aria-label="anchor" href="#minor-improvements-2-0-0"></a></h3>
<ul><li>
<p><code><a href="../reference/labelled.html">labelled()</a></code> and <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> now support adding the <code>label</code> attribute to the resulting object. The <code>label</code> is a short, human-readable description of the object, and is now also used when printing, and can be easily removed using the new <code><a href="../reference/zap_label.html">zap_label()</a></code> function. (<a href="https://github.com/tidyverse/haven/issues/362" class="external-link">#362</a>, <a href="https://github.com/huftis" class="external-link">@huftis</a>)</p>
<p>Previously, the <code>label</code> attribute was supported both when reading and writing SPSS files, but it was not possible to actually create objects in R having the <code>label</code> attribute using the constructors <code><a href="../reference/labelled.html">labelled()</a></code> or <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code>.</p>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.2" id="haven-112">haven 1.1.2<a class="anchor" aria-label="anchor" href="#haven-112"></a></h2><p class="text-muted">CRAN release: 2018-06-27</p>
<ul><li><p>haven can read and write non-ASCII paths in R 3.5 (<a href="https://github.com/tidyverse/haven/issues/371" class="external-link">#371</a>).</p></li>
<li><p><code>labelled_spss</code> objects preserve their attributes when subsetted (<a href="https://github.com/tidyverse/haven/issues/360" class="external-link">#360</a>, <a href="https://github.com/gergness" class="external-link">@gergness</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">read_sav()</a></code> gains an <code>encoding</code> argument to override the encoding stored in the file (<a href="https://github.com/tidyverse/haven/issues/305" class="external-link">#305</a>). <code><a href="../reference/read_spss.html">read_sav()</a></code> can now read <code>.zsav</code> files (<a href="https://github.com/tidyverse/haven/issues/338" class="external-link">#338</a>).</p></li>
<li><p><code>write_*()</code> functions now invisibly return the input data frame (as documented) (<a href="https://github.com/tidyverse/haven/issues/349" class="external-link">#349</a>, <a href="https://github.com/austensen" class="external-link">@austensen</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> allows non-ASCII variable labels for version 14 and above (<a href="https://github.com/tidyverse/haven/issues/383" class="external-link">#383</a>). It also uses a less strict check for integers so that a labelled double containing only integer values can written (<a href="https://github.com/tidyverse/haven/issues/343" class="external-link">#343</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> produces <code>.zsav</code> files when <code>compress = TRUE</code> (<a href="https://github.com/tidyverse/haven/issues/338" class="external-link">#338</a>).</p></li>
<li><p><code><a href="../reference/read_xpt.html">write_xpt()</a></code> can now set the “member” name, which defaults to the file name san extension (<a href="https://github.com/tidyverse/haven/issues/328" class="external-link">#328</a>).</p></li>
<li>
<p>Update to latest readstat.</p>
<ul><li>Fixes out of memory error (<a href="https://github.com/tidyverse/haven/issues/342" class="external-link">#342</a>)</li>
<li>Now supports reading and writing stata 15 files (<a href="https://github.com/tidyverse/haven/issues/339" class="external-link">#339</a>)</li>
<li>Negative integer labelled values were tagged as missing (<a href="https://github.com/tidyverse/haven/issues/367" class="external-link">#367</a>)</li>
</ul></li>
<li><p>Fix for when <code><a href="../reference/as_factor.html">as_factor()</a></code> with option <code>levels="labels"</code> is used on tagged NAs (<a href="https://github.com/tidyverse/haven/issues/340" class="external-link">#340</a>, <a href="https://github.com/gergness" class="external-link">@gergness</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.1" id="haven-111">haven 1.1.1<a class="anchor" aria-label="anchor" href="#haven-111"></a></h2><p class="text-muted">CRAN release: 2018-01-18</p>
<ul><li>
<p>Update to latest readstat. Includes:</p>
<ul><li>SPSS: empty charater columns now read as character (<a href="https://github.com/tidyverse/haven/issues/311" class="external-link">#311</a>)</li>
<li>SPSS: now write long strings (<a href="https://github.com/tidyverse/haven/issues/266" class="external-link">#266</a>)</li>
<li>Stata: reorder labelled vectors on write (<a href="https://github.com/tidyverse/haven/issues/327" class="external-link">#327</a>)</li>
<li>State: <code>encoding</code> now affects value labels (<a href="https://github.com/tidyverse/haven/issues/325" class="external-link">#325</a>)</li>
<li>SAS: can now write wide/long rows (<a href="https://github.com/tidyverse/haven/issues/272" class="external-link">#272</a>, <a href="https://github.com/tidyverse/haven/issues/335" class="external-link">#335</a>).</li>
<li>SAS: can now handle Windows Vietnamese character set (<a href="https://github.com/tidyverse/haven/issues/336" class="external-link">#336</a>)</li>
</ul></li>
<li><p><code><a href="../reference/read_spss.html">read_por()</a></code> and <code><a href="../reference/read_xpt.html">read_xpt()</a></code> now correctly preserve attributes if output needs to be reallocated (which is typical behaviour) (<a href="https://github.com/tidyverse/haven/issues/313" class="external-link">#313</a>)</p></li>
<li><p><code><a href="../reference/read_sas.html">read_sas()</a></code> recognises date/times format with trailing separator and width specifications (<a href="https://github.com/tidyverse/haven/issues/324" class="external-link">#324</a>)</p></li>
<li><p><code><a href="../reference/read_sas.html">read_sas()</a></code> gains a <code>catalog_encoding</code> argument so you can independently specify encoding of data and catalog (<a href="https://github.com/tidyverse/haven/issues/312" class="external-link">#312</a>)</p></li>
<li><p><code>write_*()</code> correctly measures lengths of non-ASCII labels (<a href="https://github.com/tidyverse/haven/issues/258" class="external-link">#258</a>): this fixes the cryptic error “A provided string value was longer than the available storage size of the specified column.”</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> now checks for bad labels in all columns, not just the first (<a href="https://github.com/tidyverse/haven/issues/326" class="external-link">#326</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> no longer fails on empty factors or factors with an <code>NA</code> level (<a href="https://github.com/tidyverse/haven/issues/301" class="external-link">#301</a>) and writes out more metadata for <code>labelled_spss</code> vectors (<a href="https://github.com/tidyverse/haven/issues/334" class="external-link">#334</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="haven-110">haven 1.1.0<a class="anchor" aria-label="anchor" href="#haven-110"></a></h2><p class="text-muted">CRAN release: 2017-07-09</p>
<ul><li>
<p>Update to latest readstat. Includes:</p>
<ul><li>SAS: support Win baltic code page (<a href="https://github.com/tidyverse/haven/issues/231" class="external-link">#231</a>)</li>
<li>SAS: better error messages instead of crashes (<a href="https://github.com/tidyverse/haven/issues/234" class="external-link">#234</a>, <a href="https://github.com/tidyverse/haven/issues/270" class="external-link">#270</a>)</li>
<li>SAS: fix “unable to read error” (<a href="https://github.com/tidyverse/haven/issues/271" class="external-link">#271</a>)</li>
<li>SPSS: support uppercase time stamps (<a href="https://github.com/tidyverse/haven/issues/230" class="external-link">#230</a>)</li>
<li>SPSS: fixes for 252-255 byte strings (<a href="https://github.com/tidyverse/haven/issues/226" class="external-link">#226</a>)</li>
<li>SPSS: fixes for 0 byte strings (<a href="https://github.com/tidyverse/haven/issues/245" class="external-link">#245</a>)</li>
</ul></li>
<li><p>Share <code><a href="../reference/as_factor.html">as_factor()</a></code> with forcats package (<a href="https://github.com/tidyverse/haven/issues/256" class="external-link">#256</a>)</p></li>
<li><p><code><a href="../reference/read_spss.html">read_sav()</a></code> once again correctly returns system defined missings as <code>NA</code> (rather than <code>NaN</code>) (<a href="https://github.com/tidyverse/haven/issues/223" class="external-link">#223</a>). <code><a href="../reference/read_spss.html">read_sav()</a></code> and <code><a href="../reference/read_spss.html">write_sav()</a></code> preserve SPSS’s display widths (<a href="https://github.com/ecortens" class="external-link">@ecortens</a>).</p></li>
<li><p><code><a href="../reference/read_sas.html">read_sas()</a></code> gains experimental <code>cols_only</code> argument to only read in specified columns (<a href="https://github.com/tidyverse/haven/issues/248" class="external-link">#248</a>).</p></li>
<li><p>tibbles are created with <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">tibble::as_tibble()</a></code>, rather than by “hand” (<a href="https://github.com/tidyverse/haven/issues/229" class="external-link">#229</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> checks that factors don’t have levels with &gt;120 characters (<a href="https://github.com/tidyverse/haven/issues/262" class="external-link">#262</a>)</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> no longer checks that all value labels are at most 32 characters (since this is not a restriction of dta files) (<a href="https://github.com/tidyverse/haven/issues/239" class="external-link">#239</a>).</p></li>
<li><p>All write methds now check that you’re trying to write a data frame (<a href="https://github.com/tidyverse/haven/issues/287" class="external-link">#287</a>).</p></li>
<li><p>Add support for reading (<code><a href="../reference/read_xpt.html">read_xpt()</a></code>) and writing (<code><a href="../reference/read_xpt.html">write_xpt()</a></code>) SAS transport files.</p></li>
<li><p><code>write_*</code> functions turn ordered factors into labelled vectors (<a href="https://github.com/tidyverse/haven/issues/285" class="external-link">#285</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="haven-100">haven 1.0.0<a class="anchor" aria-label="anchor" href="#haven-100"></a></h2><p class="text-muted">CRAN release: 2016-09-23</p>
<ul><li><p>The ReadStat library is stored in a subdirectory of <code>src</code> (<a href="https://github.com/tidyverse/haven/issues/209" class="external-link">#209</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p>Import tibble so that tibbles are printed consistently (<a href="https://github.com/tidyverse/haven/issues/154" class="external-link">#154</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li>
<p>Update to latest ReadStat (<a href="https://github.com/tidyverse/haven/issues/65" class="external-link">#65</a>). Includes:</p>
<ul><li>Support for binary (aka Ross) compression for SAS (<a href="https://github.com/tidyverse/haven/issues/31" class="external-link">#31</a>).</li>
<li>Support extended ASCII encoding for Stata (<a href="https://github.com/tidyverse/haven/issues/71" class="external-link">#71</a>).</li>
<li>Support for Stata 14 files (<a href="https://github.com/tidyverse/haven/issues/75" class="external-link">#75</a>, <a href="https://github.com/tidyverse/haven/issues/212" class="external-link">#212</a>).</li>
<li>Support for SPSS value labels with more than 8 characters (<a href="https://github.com/tidyverse/haven/issues/157" class="external-link">#157</a>).</li>
<li>More likely to get an error when attempting to create an invalid output file (<a href="https://github.com/tidyverse/haven/issues/171" class="external-link">#171</a>).</li>
</ul></li>
<li><p>Added support for reading and writing variable formats. Similarly to to variable labels, formats are stored as an attribute on the vector. Use <code><a href="../reference/zap_formats.html">zap_formats()</a></code> if you want to remove these attributes. (<a href="https://github.com/gorcha" class="external-link">@gorcha</a>, <a href="https://github.com/tidyverse/haven/issues/119" class="external-link">#119</a>, <a href="https://github.com/tidyverse/haven/issues/123" class="external-link">#123</a>).</p></li>
<li><p>Added support for reading file “label” and “notes”. These are not currently printed, but are stored in the attributes if you need to access them (<a href="https://github.com/tidyverse/haven/issues/186" class="external-link">#186</a>).</p></li>
<li><p>Added support for “tagged” missing values (in Stata these are called “extended” and in SAS these are called “special”) which carry an extra byte of information: a character label from “a” to “z”. The downside of this change is that all integer columns are now converted to doubles, to support the encoding of the tag in the payload of a NaN.</p></li>
<li>
<p>New <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> is a subclass of <code><a href="../reference/labelled.html">labelled()</a></code> that can model user missing values from SPSS. These can either be a set of distinct values, or for numeric vectors, a range. <code><a href="../reference/zap_labels.html">zap_labels()</a></code> strips labels, and replaces user-defined missing values with <code>NA</code>. New <code><a href="../reference/zap_missing.html">zap_missing()</a></code> just replaces user-defined missing values with <code>NA</code>.</p>
<p><code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> is potentially dangerous to work with in R because base functions don’t know about <code><a href="../reference/labelled_spss.html">labelled_spss()</a></code> functions so will return the wrong result in the presence of user-defined missing values. For this reason, they will only be created by <code><a href="../reference/read_spss.html">read_spss()</a></code> when <code>user_na = TRUE</code> (normally user-defined missings are converted to NA).</p>
</li>
<li><p><code><a href="../reference/as_factor.html">as_factor()</a></code> no longer drops the <code>label</code> attribute (variable label) when used (<a href="https://github.com/tidyverse/haven/issues/177" class="external-link">#177</a>, <a href="https://github.com/itsdalmo" class="external-link">@itsdalmo</a>).</p></li>
<li><p>Using <code><a href="../reference/as_factor.html">as_factor()</a></code> with <code>levels = "default</code> or <code>levels = "both"</code> preserves unused labels (implicit missing) when converting (<a href="https://github.com/tidyverse/haven/issues/172" class="external-link">#172</a>, <a href="https://github.com/itsdalmo" class="external-link">@itsdalmo</a>). Labels (and the resulting factor levels) are always sorted by values.</p></li>
<li><p><code><a href="../reference/as_factor.html">as_factor()</a></code> gains a new <code>levels = "default"</code> mechanism. This uses the labels where present, and otherwise uses the labels. This is now the default, as it seems to map better to the semantics of labelled values in other statistical packages (<a href="https://github.com/tidyverse/haven/issues/81" class="external-link">#81</a>). You can also use <code>levels = "both"</code> to combine the value and the label into a single string (<a href="https://github.com/tidyverse/haven/issues/82" class="external-link">#82</a>). It also gains a method for data frames, so you can easily convert every labelled column to a factor in one function call.</p></li>
<li><p>New <code><a href="../articles/semantics.html">vignette("semantics", package = "haven")</a></code> discusses the semantics of missing values and labelling in SAS, SPSS, and Stata, and how they are translated into R.</p></li>
<li><p>Support for <code>hms()</code> has been moved into the hms package (<a href="https://github.com/tidyverse/haven/issues/162" class="external-link">#162</a>). Time varibles now have class <code>c("hms", "difftime")</code> and a <code>units</code> attribute with value “secs” (<a href="https://github.com/tidyverse/haven/issues/162" class="external-link">#162</a>).</p></li>
<li><p><code><a href="../reference/labelled.html">labelled()</a></code> is less strict with its checks: you can mix double and integer value and labels (<a href="https://github.com/tidyverse/haven/issues/86" class="external-link">#86</a>, <a href="https://github.com/tidyverse/haven/issues/110" class="external-link">#110</a>, <a href="https://github.com/lionel-" class="external-link">@lionel-</a>), and <code><a href="../reference/labelled.html">is.labelled()</a></code> is now exported (<a href="https://github.com/tidyverse/haven/issues/124" class="external-link">#124</a>). Putting a labelled vector in a data frame now generates the correct column name (<a href="https://github.com/tidyverse/haven/issues/193" class="external-link">#193</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">read_dta()</a></code> now recognises “%d” and custom date types (<a href="https://github.com/tidyverse/haven/issues/80" class="external-link">#80</a>, <a href="https://github.com/tidyverse/haven/issues/130" class="external-link">#130</a>). It also gains an encoding parameter which you can use to override the default encoding. This is particularly useful for Stata 13 and below which did not store the encoding used in the file (<a href="https://github.com/tidyverse/haven/issues/163" class="external-link">#163</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">read_por()</a></code> now actually works (<a href="https://github.com/tidyverse/haven/issues/35" class="external-link">#35</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">read_sav()</a></code> now correctly recognises EDATE and JDATE formats as dates (<a href="https://github.com/tidyverse/haven/issues/72" class="external-link">#72</a>). Variables with format DATE, ADATE, EDATE, JDATE or SDATE are imported as <code>Date</code> variables instead of <code>POSIXct</code>. You can now set <code>user_na = TRUE</code> to preserve user defined missing values: they will be given class <code>labelled_spss</code>.</p></li>
<li><p><code><a href="../reference/read_dta.html">read_dta()</a></code>, <code><a href="../reference/read_sas.html">read_sas()</a></code>, and <code><a href="../reference/read_spss.html">read_sav()</a></code> have a better test for missing string values (<a href="https://github.com/tidyverse/haven/issues/79" class="external-link">#79</a>). They can all read from connections and compressed files (<a href="https://github.com/lionel-" class="external-link">@lionel-</a>, <a href="https://github.com/tidyverse/haven/issues/109" class="external-link">#109</a>)</p></li>
<li><p><code><a href="../reference/read_sas.html">read_sas()</a></code> gains an encoding parameter to overide the encoding stored in the file if it is incorrect (<a href="https://github.com/tidyverse/haven/issues/176" class="external-link">#176</a>). It gets better argument names (<a href="https://github.com/tidyverse/haven/issues/214" class="external-link">#214</a>).</p></li>
<li><p>Added <code>type_sum()</code> method for labelled objects so they print nicely in tibbles.</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> now verifies that variable names are valid Stata variables (<a href="https://github.com/tidyverse/haven/issues/132" class="external-link">#132</a>), and throws an error if you attempt to save a labelled vector that is not an integer (<a href="https://github.com/tidyverse/haven/issues/144" class="external-link">#144</a>). You can choose which <code>version</code> of Stata’s file format to output (<a href="https://github.com/tidyverse/haven/issues/217" class="external-link">#217</a>).</p></li>
<li><p>New <code><a href="../reference/write_sas.html">write_sas()</a></code> allows you to write data frames out to <code>sas7bdat</code> files. This is still somewhat experimental.</p></li>
<li><p><code><a href="../reference/read_spss.html">write_sav()</a></code> writes hms variables to SPSS time variables, and the “measure” type is set for each variable (<a href="https://github.com/tidyverse/haven/issues/133" class="external-link">#133</a>).</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> and <code><a href="../reference/read_spss.html">write_sav()</a></code> support writing date and date/times (<a href="https://github.com/tidyverse/haven/issues/25" class="external-link">#25</a>, <a href="https://github.com/tidyverse/haven/issues/139" class="external-link">#139</a>, <a href="https://github.com/tidyverse/haven/issues/145" class="external-link">#145</a>). Labelled values are always converted to UTF-8 before being written out (<a href="https://github.com/tidyverse/haven/issues/87" class="external-link">#87</a>). Infinite values are now converted to missing values since SPSS and Stata don’t support them (<a href="https://github.com/tidyverse/haven/issues/149" class="external-link">#149</a>). Both use a better test for missing values (<a href="https://github.com/tidyverse/haven/issues/70" class="external-link">#70</a>).</p></li>
<li><p><code><a href="../reference/zap_labels.html">zap_labels()</a></code> has been completely overhauled. It now works (<a href="https://github.com/markriseley" class="external-link">@markriseley</a>, <a href="https://github.com/tidyverse/haven/issues/69" class="external-link">#69</a>), and only drops label attributes; it no longer replaces labelled values with <code>NA</code>s. It also gains a data frame method that zaps the labels from every column.</p></li>
<li><p><code>print.labelled()</code> and <code>print.labelled_spss()</code> now display the type.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="haven-020">haven 0.2.0<a class="anchor" aria-label="anchor" href="#haven-020"></a></h2><p class="text-muted">CRAN release: 2015-04-09</p>
<ul><li><p>fixed a bug in <code>as_factor.labelled</code>, which generated <na>’s and wrong labels for integer labels.</na></p></li>
<li><p><code><a href="../reference/zap_labels.html">zap_labels()</a></code> now leaves unlabelled vectors unchanged, making it easier to apply to all columns.</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> and <code><a href="../reference/read_spss.html">write_sav()</a></code> take more care to always write output as UTF-8 (<a href="https://github.com/tidyverse/haven/issues/36" class="external-link">#36</a>)</p></li>
<li><p><code><a href="../reference/read_dta.html">write_dta()</a></code> and <code><a href="../reference/read_spss.html">write_sav()</a></code> won’t crash if you give them invalid paths, and you can now use <code>~</code> to refer to your home directory (<a href="https://github.com/tidyverse/haven/issues/37" class="external-link">#37</a>).</p></li>
<li><p>Byte variables are now correctly read into integers (not strings, <a href="https://github.com/tidyverse/haven/issues/45" class="external-link">#45</a>), and missing values are captured correctly (<a href="https://github.com/tidyverse/haven/issues/43" class="external-link">#43</a>).</p></li>
<li><p>Added <code><a href="../reference/read_dta.html">read_stata()</a></code> as alias to <code><a href="../reference/read_dta.html">read_dta()</a></code> (<a href="https://github.com/tidyverse/haven/issues/52" class="external-link">#52</a>).</p></li>
<li><p><code><a href="../reference/read_spss.html">read_spss()</a></code> uses extension to automatically choose between <code><a href="../reference/read_spss.html">read_sav()</a></code> and <code><a href="../reference/read_spss.html">read_por()</a></code> (<a href="https://github.com/tidyverse/haven/issues/53" class="external-link">#53</a>)</p></li>
<li><p>Updates from ReadStat. Including fixes for various parsing bugs, more encodings, and better support for large files.</p></li>
<li><p>hms objects deal better with missings when printing.</p></li>
<li><p>Fixed bug causing labels for numeric variables to be read in as integers and associated error: <code>Error: `x` and `labels` must be same type</code></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="haven-011">haven 0.1.1<a class="anchor" aria-label="anchor" href="#haven-011"></a></h2><p class="text-muted">CRAN release: 2015-03-03</p>
<ul><li>Fixed memory initialisation problems found by valgrind.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="http://www.evanmiller.org" class="external-link">Evan Miller</a>, <a href="https://www.gorcha.org" class="external-link">Danny Smith</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

